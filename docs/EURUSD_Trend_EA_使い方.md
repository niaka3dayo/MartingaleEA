# EURUSD_Trend_EA 使用ガイド

## 概要

EURUSD_Trend_EAは、ユーロドル（EURUSD）専用に設計された高度なトレンドフォロー型の自動売買EAです。複数のテクニカル指標を組み合わせたスコアリングシステムにより、トレンドの方向性を判断し、高確率のエントリーポイントを特定します。

## 特徴

- 複数のテクニカル指標（EMA、RSI、ADX、MACD）を組み合わせたトレンド分析
- スコアリングシステムによる信頼性の高いエントリーポイントの特定
- 資金管理機能によるリスク調整
- トレーリングストップによる利益の確保
- 時間フィルターによる不安定な市場の回避
- ECNブローカー対応

## インストール方法

### 前提条件

- MetaTrader 4（MT4）がインストールされていること
- PowerShellが実行可能な環境（Windows）

### インストール手順

1. PowerShellを管理者権限で実行
2. プロジェクトのルートディレクトリで以下のコマンドを実行:

   ```shell
   .\compile_ea.ps1
   ```

3. コンパイルが完了したら、以下のコマンドを実行:

   ```shell
   .\install_to_mt4.ps1
   ```

4. MT4のデータディレクトリが複数ある場合は、使用するディレクトリを選択

## MT4での設定方法

1. MT4を起動
2. ナビゲーターウィンドウを開く（Ctrl+N）
3. Expert Advisorsセクションで「EURUSD_Trend_EA」を見つける
4. EURUSDの通貨ペアチャート上にEAをドラッグ＆ドロップ
5. 設定ダイアログが表示されるので、必要に応じてパラメーターを調整
6. 「共通」タブで「自動売買を許可する」と「DLLの使用を許可する」にチェックを入れる
7. 「OK」をクリックして開始

## パラメーター設定ガイド

### トレード設定

- **InitialLotSize**: 初期ロットサイズ（デフォルト: 0.1）
  - 推奨: 口座資金の1%以下のリスクになるように設定
- **MaxLotSize**: 最大ロットサイズ（デフォルト: 5.0）
  - 推奨: 口座資金に応じて適切に制限
- **UseMoneyManagement**: 資金管理を使用する（デフォルト: true）
  - 推奨: 有効にしておく（口座資金に応じてロットサイズを自動調整）
- **RiskPercent**: リスク率（％）（デフォルト: 2.0）
  - 推奨: 1.0～3.0（保守的なトレードなら1.0、積極的なら3.0）
- **StopLoss**: ストップロス（ポイント）（デフォルト: 50）
  - 推奨: 40～60（市場のボラティリティに応じて調整）
- **TakeProfit**: 利益確定（ポイント）（デフォルト: 100）
  - 推奨: StopLossの1.5～2倍
- **TrailingStop**: トレーリングストップ（ポイント）（デフォルト: 30）
  - 推奨: 20～40（トレンドの強さに応じて調整）
- **Slippage**: スリッページ（ポイント）（デフォルト: 3）
  - 推奨: ブローカーの条件に応じて調整
- **MaxSpread**: 最大許容スプレッド（ポイント）（デフォルト: 5）
  - 推奨: ブローカーの通常スプレッド+2～3ポイント

### 時間設定

- **UseTimeFilter**: 時間フィルターを使用する（デフォルト: true）
  - 推奨: 有効にしておく（ボラティリティの高い時間帯を避ける）
- **StartHour**: 開始時間（時）（デフォルト: 8）
  - 推奨: ロンドン市場開始前後（7～9）
- **EndHour**: 終了時間（時）（デフォルト: 20）
  - 推奨: NY市場終了前（19～21）
- **MondayFilter**: 月曜日を除外（デフォルト: false）
  - 推奨: お好みで設定（週明けの不安定な動きを避けたい場合はtrue）
- **FridayFilter**: 金曜日を除外（デフォルト: true）
  - 推奨: true（週末のギャップリスクを避ける）

### トレンド判定設定

- **FastEMA**: 短期EMA期間（デフォルト: 8）
- **SlowEMA**: 長期EMA期間（デフォルト: 21）
- **SignalEMA**: シグナルEMA期間（デフォルト: 13）
- **RSI_Period**: RSI期間（デフォルト: 14）
- **RSI_UpperLevel**: RSI上限レベル（デフォルト: 70）
- **RSI_LowerLevel**: RSI下限レベル（デフォルト: 30）
- **ADX_Period**: ADX期間（デフォルト: 14）
- **ADX_MinLevel**: ADX最小レベル（デフォルト: 25）
- **MACD_FastEMA**: MACD短期EMA（デフォルト: 12）
- **MACD_SlowEMA**: MACD長期EMA（デフォルト: 26）
- **MACD_SignalPeriod**: MACDシグナル期間（デフォルト: 9）

※トレンド判定設定は、デフォルト値が最適化されています。経験者以外は変更しないことをオススメします。

### その他の設定

- **MagicNumber**: マジックナンバー（デフォルト: 20240601）
  - 推奨: 他のEAと重複しない任意の数値
- **EnableDebugLog**: デバッグログを有効にする（デフォルト: false）
  - 推奨: 問題が発生した場合のみtrue
- **SendPushNotifications**: プッシュ通知を送信する（デフォルト: false）
  - 推奨: トレード状況を常に把握したい場合はtrue
- **CloseAllFriday**: 金曜日に全ポジションを閉じる（デフォルト: true）
  - 推奨: true（週末のギャップリスクを避ける）
- **FridayCloseHour**: 金曜日のクローズ時間（時）（デフォルト: 20）
  - 推奨: 20～21（NY市場終了前）

## バックテスト方法

1. MT4のストラテジーテスターを開く（Ctrl+R）
2. 「エキスパートアドバイザー」で「EURUSD_Trend_EA」を選択
3. 「シンボル」で「EURUSD」を選択
4. 「モデル」で「すべてのティック」または「コントロールポイント」を選択
5. テスト期間を設定
6. 「プロパティ」ボタンをクリックしてパラメーターを調整
7. 「スタート」ボタンをクリックしてバックテストを開始

## 最適化方法

1. MT4のストラテジーテスターを開く（Ctrl+R）
2. 「エキスパートアドバイザー」で「EURUSD_Trend_EA」を選択
3. 「シンボル」で「EURUSD」を選択
4. 「モデル」で「オープンプライス」または「コントロールポイント」を選択
5. 「最適化」にチェックを入れる
6. テスト期間を設定（最低6か月以上を推奨）
7. 「プロパティ」ボタンをクリックし、最適化したいパラメーターの「開始」「ステップ」「停止」値を設定
8. 「スタート」ボタンをクリックして最適化を開始

## 注意事項

- このEAはユーロドル（EURUSD）専用です。他の通貨ペアでは使用できません。
- デモ口座でテストしてから実口座で使用することを強く推奨します。
- 過去のパフォーマンスは将来の結果を保証するものではありません。
- リスク管理を適切に行い、資金管理に十分注意してください。
- 急激な相場変動時（重要な経済指標発表時など）は、EAを一時的に停止することをオススメします。

## トラブルシューティング

- **EA起動時にエラーが発生する場合**
  - MT4の「自動売買を許可する」と「DLLの使用を許可する」にチェックが入っているか確認
  - MT4を再起動
  - EAを再コンパイル

- **注文が入らない場合**
  - スプレッドが「MaxSpread」設定値を超えていないか確認
  - 時間フィルターの設定を確認
  - トレンドスコアが閾値に達していない可能性あり（デバッグログを有効にして確認）

- **予期せぬ動作をする場合**
  - デバッグログを有効にして動作を確認
  - パラメーターを初期値に戻して再テスト
  - MT4とEAを最新バージョンに更新

## サポート

問題が解決しない場合は、プロジェクトのイシューページで報告してください。
